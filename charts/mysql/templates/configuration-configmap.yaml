---
apiVersion: v1
kind: ConfigMap
metadata:
  name: init-configuration
  labels:
    app.kubernetes.io/component: {{ include "mysql.name" . }}
data:
  mysql.cnf: |-
    [client]
    default-character-set=utf8
    [mysql]
    default-character-set=utf8
    [mysqld]
    collation-server = utf8_unicode_ci
    init-connect='SET NAMES utf8'
    character-set-server = utf8
    pid-file        = /var/run/mysqld/mysqld.pid
    socket          = /var/run/mysqld/mysqld.sock
    datadir         = /var/lib/mysql
    #log-error      = /var/log/mysql/error.log
    # By default we only accept connections from localhost
    #bind-address   = 127.0.0.1
    # Disabling symbolic-links is recommended to prevent assorted security risks
    symbolic-links=0
    #如果你的sql语句里有group，添加这句可以防止报错 
    sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES